
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°é¸Ÿåœ°å›¾æ—…è¡Œè§„åˆ’</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<!-- ä¿®æ”¹æ ‡é¢˜å’Œè¯´æ˜éƒ¨åˆ† -->
<div class="container">
    <h1 class="main-title">
        <span class="icon">ğŸ¦</span>
        å°é¸Ÿåœ°å›¾æ—…è¡Œè§„åˆ’ç³»ç»Ÿ
    </h1>

    <div class="section-divider">
        <div class="divider-line"></div>
        <span class="divider-text">æ™ºèƒ½è·¯çº¿è§„åˆ’ç³»ç»Ÿ</span>
        <div class="divider-line"></div>
    </div>

    <div class="instruction-box gradient-bg">
        <div class="instruction-header">
            <span class="icon">ğŸ—ºï¸</span>
            <h2>ä½¿ç”¨æŒ‡å—</h2>
        </div>
        <div class="example-list">
            <div class="example-item">
                <span class="bullet">âœ¨</span>
                <p>å¤§ç†å¤åŸé™„è¿‘çš„æ™¯ç‚¹æ­¥è¡Œè·¯çº¿è§„åˆ’</p>
            </div>
            <div class="example-item">
                <span class="bullet">ğŸš—</span>
                <p>æ˜†æ˜åˆ°å“ˆå°”æ»¨çš„å¯¼èˆªè·¯çº¿</p>
            </div>
            <div class="example-item">
                <span class="bullet">ğŸ¨</span>
                <p>äº‘å—å¤§å­¦ä¸œé™†æ ¡åŒºé™„è¿‘é…’åº—æ¨è</p>
            </div>
        </div>
    </div>

    <!-- ä¿æŒåŸæœ‰è¡¨å•ç»“æ„ -->
</div>
        <form id="queryForm">
            <div class="input-group">
                <input type="text" id="query" name="query"
                       placeholder="è¯·è¾“å…¥ç›®çš„åœ°ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬æ•…å®«é™„è¿‘çš„æ™¯ç‚¹è·¯çº¿è§„åˆ’" required>
                <button type="submit">å¼€å§‹è§„åˆ’</button>
            </div>
        </form>

        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loading" class="loading" style="display:none;">
            <div class="loader"></div>
            <p>æ­£åœ¨åŠªåŠ›è§„åˆ’è·¯çº¿ä¸­...</p>
        </div>

        <!-- ç»“æœå±•ç¤º -->
        <div id="resultContainer" class="result-container" style="display:none;">
            <div id="resultContent"></div>
            <button onclick="resetForm()" class="back-btn">é‡æ–°è§„åˆ’</button>
        </div>
    </div>

<script>
document.getElementById('queryForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const query = document.getElementById('query').value;
    const resultDiv = document.getElementById('resultContent');
    const container = document.getElementById('resultContainer');
    const loading = document.getElementById('loading');

    loading.style.display = 'block';
    container.style.display = 'none';

    try {
        const response = await fetch('/process_query', {
            method: 'POST',
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            body: `query=${encodeURIComponent(query)}`
        });

        const data = await response.json();
        loading.style.display = 'none';

        if (data.error) {
            resultDiv.innerHTML = `<div class="error">${data.error}</div>`;
        } else if (data.html_content) {
            // ç›´æ¥ä½¿ç”¨åç«¯æ ¼å¼åŒ–å¥½çš„HTML
            resultDiv.innerHTML = data.html_content;
        } else {
            resultDiv.innerHTML = "æœªæ‰¾åˆ°æœ‰æ•ˆç»“æœ";
        }

        container.style.display = 'block';
        window.scrollTo({
            top: container.offsetTop - 50,
            behavior: 'smooth'
        });

    } catch (err) {
        loading.style.display = 'none';
        resultDiv.innerHTML = `<div class="error">è¯·æ±‚å¤±è´¥ï¼š${err.message}</div>`;
        container.style.display = 'block';
    }
});
</script>
</body>
</html>
